## APIへのリクエストをスロットルで制限するレートAPIレートリミッターのメリット

- サービス拒否(DoS)攻撃によるリソースの枯渇を防ぐ。
    - Ex. Twitter 3時間あたりのツイート数を300に制限している
- コストを削減する
    - 過剰なリクエストを制限することで、サーバーの数を減らし、より多くのリソースを優先度の高いAPIに割り当てることができる
- サーバーの過負荷を防ぐ

## レートリミッターはどこに置くのか

- クライアント側、サーバー側どちらでも実装することができる
- クライアント側は、一般的に悪意のあるユーザーにより、簡単に偽造される可能性があるため、レート制限を実施するには、信頼性の低い場所である
- どこに置くのかはレート制限を置く上で重要だが、絶対的な答えはない。
- ガイドライン
    - 現在使用しているプログラミング言語で、レート制限を実装可能なのか
    - ビジネスニーズに合ったレート制限アルゴリズムを特定する
    - すでにマイクロサービス、アーキテクチャを採用し、認証などでAPIゲートウェイを設計に組み込んでいる場合、レート制限をゲートウェイに追加できる
    - 独自に構築するのは時間がかかるため、商用APIゲートウェイを利用するのが良い

### サーバー側での実装

![IMG_6643.jpeg](attachment:2c6e2d58-91cb-4738-897b-445adf7214f3:IMG_6643.jpeg)

### リミッターミドルウェア

- APIへのリクエストをスロットルで制限する
    
    ![IMG_6644.jpeg](attachment:84781792-11b7-46df-b24e-e7a140073aac:IMG_6644.jpeg)
    
    - HTTPレスポンス429は過剰なリクエストを送信したことを示す
- レート制限は通常、APIゲートウェイと呼ばれるコンポーネント内で実装されている

### レートリミッターアルゴリズム

APIへのリクエストをスロットルで制限するレート