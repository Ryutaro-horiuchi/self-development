## 単一サーバーのセットアップ

![IMG_6574.jpeg](attachment:62f9e1f0-c50b-48cd-a39d-189186d14bb3:IMG_6574.jpeg)

## データベース

![IMG_6579.jpeg](attachment:b1727ea4-d5c3-4922-8559-9d9f69e88eaa:IMG_6579.jpeg)

- 1台のサーバーでは足りなくなり、Web/モバイルトラフィック用のサーバーとDB用のサーバーとで分離

### どのデータベースを使うか

- リレーショナルDB
    - 他テーブルとの結合が可能
    - ほとんどのケースで最適な選択肢
- NoSQL
    - 一般的には結合ができない
    - 特定のユースケースで適しているかもしれない
        - アプリケーションに超低遅延がある場合
        - 非構造化データを扱う場合、リレーショナルなデータがない場合
        - データのシリアライズ、デシリアライズだけが必要な場合
        - 大量データの保存が必要な場合

### 垂直スケーリングと水平スケーリング

- 垂直スケーリング
    - スケールアップを指し、サーバーのパワー(CPU、RAMなど)を追加する
    - トラフィックが少ない場合は、シンプルで利点ある
    - 制約
        - 垂直スケーリングはハードウェアとしての限界あり。1台のサーバーにむせいげんにCPUとメモリを追加することは不可能
        - 垂直スケーリングはフェイルオーバーや冗長性がない。1台のサーバーがダウンすると、Webサイトやアプリケーションも完全にダウンする
- 水平スケーリング
    - スケールアウトを指し、さらにサーバーを追加するアプローチ
    - 大規模なアプリケーションでは望ましい

### データーベースレプリケーション

![IMG_6576.jpeg](attachment:b7a4ab5a-ff6b-4c60-9c7f-f4a344760762:IMG_6576.jpeg)

- マスターベースとスレーブデータベース
    - マスターベースは、書き込みのみをサポートする。
        - 挿入、削除、更新はすべてマスターベースへ
    - スレーブデータベースは、マスターデータベースからデータのコピーを取得し、読み込みのみをサポートする
- レプリケーションの利点
    - パフォーマンスの向上
        - 書き込みはマスター、読み込みはスレーブで分散して行われるため、より多くのクエリを並列で処理でき、パフォーマンスが向上する
    - 信頼性
        - 自然災害でDBサーバーが破壊されてもデータは保全される
    - 高い可用性
        - DBを複数の場所に複製することで、一つのDBがオフラインになっても、別のデータベースサーバーに保存されているデータにアクセスできる
            - スレーブデータベースが一つしかなく、それがオフラインになった場合、読み取り操作は一時的にマスターへ
            - マスターベースがオフラインになった場合、スレーブデータベースが新しいマスターに設定される

## ロードバランサ

![IMG_6577.jpeg](attachment:d55c0893-23a2-48f5-b146-9bb79236438e:IMG_6577.jpeg)

- 受信したトラフィックをロードバランサ・セットで定義されたWebサーバーに均等に分散させる
- ユーザーはロードバランサのパブリックIPに直接接続する。ロードバランサ ↔ ウェブサーバーの通信はセキュリティ向上のため、プライベートIPを使用する。
- ロードバランサと2台目のWebサーバーを追加したことにより、フェイルオーバーの問題を解決し、可用性が向上
    1. サーバー1がオフラインになった場合、すべてのトラフィックがサーバー2にルーティングされる。これによりWebサイトがオフラインになることを防げる
    2. Webサイトのトラフィックが急増し、2台のサーバーでは処理しきれない場合、ロードバランサによって新たにサーバーを追加し、スケールアウトする。

## キャッシュ

- 高いレスポンスや頻繁にアクセスされるデータの結果をメモリに保存し、後続のリクエストをより迅速に処理されるようにする一時的な記憶領域

![IMG_6578.jpeg](attachment:ecf0b653-ce24-4cf5-9653-cb20da8d3401:IMG_6578.jpeg)