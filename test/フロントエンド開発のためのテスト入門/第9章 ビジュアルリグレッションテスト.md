### ビジュアルリグレッションテストの必要性

- 見た目のリグレッションはスナップショットでは防げない
    - グローバル指定のCSSがあった場合、変更の検知ができない
    - CSS Modulesはスナップショットテストには反映されない
    - HTML出力結果を比較するのみであり、十分とは言えない

### ビジュアルリグレッションテストの概要

- ある時点からある時点までの画像を比較し、px単位で差分を検出する
- Chromiumなどのブラウザをヘッドレスモードで動作させることで実施する
    - ヘッドレスモードとはGUIのないブラウザ

p235

E2Eのビジュアルリグレッションテストだと、一つのコンポーネントの余白を設けると、他のコンポーネントの位置が変わり、差分が発生したとみなされる → 非常に大まかなテスト

- Storybookを使用したコンポーネント単位のテストでも、ビジュアルリグレッションテストを実行でき、E2Eのような影響を受けることもない

p236

reg-cliで画像比較をする

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/42b16988-a5a8-437d-af8b-c8412ee1342b/a1eadf3f-2fd8-4845-8668-f9ef9fec831d/Untitled.png)

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/42b16988-a5a8-437d-af8b-c8412ee1342b/3516109b-c9ba-40d4-8858-3c951cd6d5ef/Untitled.png)

p242

本書では、build-storybookを登録とあるが、バージョン7でstorybook buildに変更になった模様

p245

req-suitを導入する

Github連携し、CIに組み込む