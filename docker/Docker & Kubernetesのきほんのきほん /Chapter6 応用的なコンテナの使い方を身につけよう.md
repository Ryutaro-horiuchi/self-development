# ファイルのコピーをする

---

- コンテナからホスト、ホストからコンテナへファイルをコピーすることが可能
    - コンテナからホストへコピー
        
        ```bash
        % docker cp ホスト側パス コンテナ名: コンテナ側パス
        ```
        
    - コンテナからホストへコピー
        
        ```bash
        % docker cp コンテナ名: コンテナ側パス ホスト側パス
        ```
        

# ボリュームのマウント

---

## ボリュームとマウント

- ボリューム
    
    ストレージの1領域を区切ったもの
    
    → 長いカステラの一切れのようなイメージ
    
- マウント(取り付けるという意味)
    
    対象を接続して、OSやソフトウェアの支配下に置く
    
    → USBメモリをパソコンに挿すと、フォルダが開ける(USBメモリをパソコンにマウントしている)
    

## データの永続化

- コンテナは作っては壊す性質のため、データはコンテナ内部にもたせず外に持たせる
    
    <aside>
    💡 記憶領域をマウントして、外のデータを操作できるようにする必要が出てくる
    
    </aside>
    

## 記憶領域のマウント(ボリュームのマウント)の種類

Dockerに記憶領域をマウントするには2種類の方法がある

- ボリュームマウント
    - Docker Engineが管理している領域内にボリュームを作成して、ディスクとしてコンテナにマウントする
    - ボリュームを直接操作しづらいため、仮で使いたい場合や、滅多に触らないが消してはいけないファイルを置くのに使うことが多い
- バインドマウント
    - Docker Engineの管理していない場所の既にあるディレクトリをコンテナにマウントする
    - 頻繁にファイルを編集する必要があるときは、ここに置く
- ボリュームマウントとバインドマウントの違い
    
    
    | 項目 | ボリュームマウント | バインドマウント |
    | --- | --- | --- |
    | 記憶領域 | ボリューム | ディレクトリやファイル |
    | マウント場所 | Docker Engine 管理下 | どこでも可能 |
    | マウント時の動作 | ボリュームを作成してマウント | 既存のファイルやフォルダをマウント |
    | 内容の編集 | Dockerコンテナを経由して行う | 普通のファイルとして扱う |
    | バックアップ | 複雑な手順 | 普通のファイルとして扱う |

## 記憶領域をマウントする

- 記憶領域をマウントするとは
    
    記憶領域をコンテナに取り付ける
    
- マウントする手順
    - 記憶領域を作る → コンテナを作る

### 記憶領域を作るコマンド

- バインドマウントの場合、フォルダやファイルを通常通り用意する
- ボリュームマウントの場合は、ボリューム系コマンドを使用する
    - ボリュームの作成
        
        `docker volume create ボリューム名`
        
    - ボリュームの削除
        
        `docker volume rm ボリューム名`
        

### 記憶領域をマウントするコマンド

- バインドマウントのよく使う記述例
    
    `docker run (省略) -v 実際の記憶領域パス：コンテナの記憶領域パス (省略)`
    
- ボリュームマウントのよく使う記述例
    
    `docker run (省略) -v ボリューム名：コンテナの記憶領域パス (省略)`
    

p175

ボリュームのバックアップ

p178

# コンテナのイメージ化

---

- 既にあるイメージを書き出す
- Dockerfileでイメージを作成する