p174

TDD三原則

テストコードと製品コードはほぼ同時に書く

p175

テストを綺麗に保つ

テストコードも製品コードと同じぐらい重要で品質を保つ必要がある

- 汚いテストは、テストがないことと同値
- コードの変更があったときにテストコードも変更する必要があるが、汚いとテストコード自体の修正に時間がかかる

p176

テストがないと

- コードの変更が期待通りに動くのかがわからない
- ある変更がシステムの別の部分を壊していないか確認することができない

テストは、xxx性を可能とする

- コードの柔軟性、保守容易性、再利用性を維持、提供するのは単体テスト
    - テストがあれば、変更を恐れずに行うことができるから

p180

クリーンテスト

- 洗練されたテストとは、読みやすさ
    - 読みやすいテストとは、構築 - 操作 - 検査の3パターンで表現されていること
        - 構築
            - テストデータの構築
        - 操作
            - テストデータに操作を行う
        - 検査
            - 操作結果が期待される結果になっているか

- ドメイン特化テスト言語
    - テストコードは、単純、簡潔、表現豊かである必要がある
        - それぞれのフェーズで必要な処理が長くなる場合は、それをラップする関数を定義しわかりやすい命名にすれば、単純・簡潔となる

p183

一つにのテストに一つのアサート

筆者としては、良い指針だと思うが、2つ以上のアサート文を入れて問題ないと考えている。重要なのは、それが少なくするべき

→ 一つのテストでは1つの概念を扱う

p186

F.I.R.S.T

クリーンテストは、上記の頭文字に示される5つの規則に従います。

- 高速である Fast
    - 実行に時間がかかると、テストを頻繁に実行する気が削がれてしまう
        - 頻繁に実行しないと、早い時期(修正が容易な時期)に問題に気づくことができなくなる
- 独立している Independent
    - テストはお互いに関連すべきではない
        - あるテストが後続のテストの前提条件を準備してはいけない
            - 前提条件を準備してしまうと、そのテストの失敗が後続のテストの失敗を生み出してしまう
- 再現性がある Repeatbale
    - どんな環境でも再現可能でなければならない
        - 本番環境、品質保証環境、インターネットが繋がらないPC環境でも
- 自己検証可能 （Sef-Validating）
    - 成功か失敗かのどちらかを出力すべき
        - 長いファイルを読まないと、テストの結果がわからないようなテストは避けるべき
            - 例えば、長いテキストファイルを比べてテストが成功したかどうかがを確認するようなテストは、判定が属人的になってしまう
- 適時性がある (Timely)
    - テストは必要なときにすぐ書けなければならない
        - 製品コードを書く直前に単体テストは書かれ、このテストが通るように製品コードを書く必要がある
    - 製品コードの後でテストを書こうとすると、製品コードがテストしづらいものになっていることに気づくことになるかも
        
        → その中のいくつかは、あまりにテストが困難だと結論付けることになるかも
        
        → テストが困難な製品コードを設計してしまうかも