# ケント・ベックの単純な設計のための4つの規則

---

- 優れた設計のソフトウェアの開発において重要な役割を果たす
- ケントは、以下の4つの規則に従えば設計は単純になるとしている

## 1. 全テストを実行する

- 設計とは、意図通りに動作するシステムを生成すること
    - 紙の上で完璧な設計となっていても、システムが意図通りに動作しているのかを簡単に検証できなければ、意味がない
- システムをテスト可能にすることで設計者は自ずと、クラス1つ1つが小さく、それが単一機能を実装しているような設計へと促されることになる
    - SRPに沿ったクラスはテストが簡単
    - テストを書けば書くほど、物事をテストが簡単になる方向へと押し進めることになる
    - システムを完全にテスト可能にすることが、より優れた設計を生み出すことへとつながる
- 強い結びつきがあるとテストを書くのは困難になる
    - テストを書くほど、DIPのような原則や依存性注入のようなインターフェイスを用いて、結びつきを最小限とするための抽象化の技法を活用するようになる

### リファクタリング

- テストができあがれば、コード、クラスを綺麗にし続けることができるようになる
- テストがあるという事実は、コードを綺麗にすることで、間違って壊してしまうかもしれないという恐怖を取り除いてくれる
- テストがあり、リファクタリングができるようになって初めて、残り3つの「重複の排除」、「表現力の保証」、「クラスとメソッド数の最小化」を実践できる土台が出来上がる

## 2. 重複の排除

- 優れたシステムを作り上げるためには、重複を排除するという意思が必要
- 全く同じに見える行を始め、似通った行や部分的な重複も排除すべき
- テンプレートメソッドパターンの使用も視野に

## 3. 表現に富む

- 前提
    - ソフトウェアプロジェクトにおけるコストの大半は、長い期間に渡る保守に費やされる
        - 変更を行うときに、不具合を混入してしまう可能性を最小化するには、システムの動作を理解可能とすることが重要
            
            → コードは書き手の意図が明快に表現されている必要がある
            
- 表現
    - 標準の用語を用いることでも、自分の意図を表現できる
        - デザインパターンは、情報伝達としても使用できる。
            - パターン名をクラスにつけることで、自分の設計を他の開発者に簡単に伝えることができる
    - 単体テスト
        - 自分の意図を表現できる
        - テストの第一の目的は、使用例の文書化にある
- 書いた関数とクラスをより良くするためにちょっとだけ時間を割くことを意識

## 4. クラスとメソッドを最小限に

- 重複の排除、SRPといった概念がいきすぎると、クラスとメソッドがあまりに多く生成されるため、最小限に抑えることは意識したい
    - とはいえ、この規則は全体の中で優先度が最も低い。
    - クラスと関数の数を少なくすることは大事だが、テストを用意し、重複を排除して、コードに自分の意図を表現することがはるかに重要