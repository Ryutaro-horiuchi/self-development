## アーキテクチャのサポート

優れたアーキテクチャは以下のことをサポートしなければいけない

- システムのユースケース
- システムの運用
- システムの開発
- システムのデプロイ

### ユースケース

- システムの意図をサポートしなければいけない。
- ショッピングカートのアプリケーションであれば、アーキテクチャはショッピングカートのユースケースをサポートしなければいけない

### 運用

- アーキテクチャは、システムの運用において、表面的というよりも本質的な役割を果たす
- システムが毎秒100,000人の顧客を処理する必要があるなら、アーキテクチャはその求められているユースケースに対し、スループットと応答時間をサポートしなければならない

### 開発

- アーキテクチャは、開発環境のサポート位のいて、非常に重要な役割を果たす。
- チームや利害関係の多い組織では、開発中にお互いが干渉しないように、単独で開発可能なコンポーネントにシステムを適切に分割しなければならない

### デプロイ

- デプロイの手軽さの決定にも大きな役割を果たす

### 各サポート項目がお互いに満足するコンポーネントのバランスを取ることは難しい

- 全てのユースケースを把握できないことや運用上の制約、チーム構造、デプロイ要件がわからないことなど
- とはいえ、達成すべきターゲットが明確でなくても、システムを独立したコンポーネントに分割できるアーキテクチャの原則によって、上記のバランスをうまく取ることができる

## コンポーネントの独立

### レイヤーの切り離し

- アーキテクトは、SRP(単一責任の原則)とCCP(閉鎖性共通の原則)を使用して、システムの意図を考慮しながら異なる理由で変更されるものを分離し、同じ理由で変更されるものをまとめることができる
- 異なる理由 - Ex. インターフェイス(UI)と、ビジネスルールの部分を分離させる

### ユースケースの切り離し

- UI, ビジネスルールといった水平方向のレイヤーの切り離しに加え、ユースケースの切り離しによって、垂直方向への切り離しも可能になる
    - Ex. 注文追加のユースケースのUIと、注文削除のユースケースのUIとを分離する

### アーキテクトが注意すべき重複の罠

- 偶然(偽物)の重複
    - 明らかに重複していたコードが(変更頻度や理由が違うために)異なる進化を遂げ、数年後には両者がまるで違ったものになっていること
    - この重複は統一的に扱わないようにする。これを統一してしまうと、後から修正するのは大変になる

### 切り離し方式

レイヤーやユースケースを切り離す具体的な方法