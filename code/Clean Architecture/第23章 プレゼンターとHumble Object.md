## Humble Objectパターン

- テストしにくい振る舞いとテストしやすい振る舞いを分離するために生み出されたデザインパターン
    - 振る舞いを二つのモジュール、またはクラスに分割する
        - Humble Object - テストが難しいモジュール
        - もう一つはHumble Objectから取り除かれたテストしやすいモジュール
    - Ex.
        - GUIのユニットテストは難しい。「画面に適切な要素が表示されているかを確認する」ため
            - だがGUIの振る舞いの大部分は、Humble Objectパターンを使えば、簡単にテストできる

### プレゼンターとビュー

- ViewはHumble Object
    - コードはできるだけシンプルにしておく
- Presenterは、テスト可能なオブジェクト
- Ex. アプリケーションがフィールドに日付を表示したい
    - PresenterにDateオブジェクトを渡す → Presenterはそのデータを適切な文字列にフォーマットして、Viewから発見できるViewModelというシンプルなデータ構造に配置する
    - ViewはViewModelからデータを読み込み、画面に表示するだけ
- テストとアーキテクチャ
    - 振る舞いをテストしやすい部分とテストしにくい部分に分割することが、アーキテクチャの境界の定義につながる

### データベースゲートウェイ

- ユースケースとデータベースの間にあるのが「データベースゲートウェイ」
- アプリケーションがDBに対して実行する作成・読み取り・更新・削除のメソッドを含んだポリモーフィックインターフェイス
    - Ex. アプリケーションが昨日ログインしたすべてのユーザーの苗字を知りたい
        - UserGateWayインターフェイスにgetLastNamesOfUsersWhoLoggedInAfterというメソッドを含めておく
- データベースゲートウェイは、HumbleObject
    - DBからデータを取得するだけだが、テストは難しい
- ユースケースはゲートウェイを適切なスタブに置き換えることができるため、Humbleではない