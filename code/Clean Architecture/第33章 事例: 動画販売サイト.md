## プロダクト

---

- 動画を販売するウェブサイト (Udemyのようなサービス)
- 販売したい動画を持っている作者は、個人・法人に販売する
- 個人向けの販売は、購入者と視聴者が同一人物ではあるが、法人向けでは、購入者と視聴者は別であることが多い
- 動画の作者は、動画ファイルとその説明文に加えて、試験や練習問題、ソースコードなどの資料を付属ファイルとして提供する必要がある
- 管理者は、新しい動画シリーズを追加したり、動画シリーズに動画を追加したり、各種ライセンス価格を設定したりする必要がある

## ユースケース分析

---

- 図33-1
    
    ![IMG_4080.jpeg](attachment:a05a824e-8c1a-466b-b9e3-6773d35049f1:IMG_4080.jpeg)
    
    - 単一責任の原則の観点からは、これら4つのアクターがそれぞれ、システムにおける変更の要因になる
    - 中央ある点線のユースケースは、抽象ユースケースである
        - 抽象ユースケースは全面的な方針で、別のユースケースがそれに肉付けする
    

## コンポーネントアーキテクチャ

---

- 図33-2
    
    ![IMG_4081.jpeg](attachment:d63d1ddc-944b-46f0-af5b-4188bb0ed548:IMG_4081.jpeg)
    
    - 二重線は、アーキテクチャの境界
    - Catalog ViewとCatalog Presenterは抽象ユースケースの「カタログを閲覧する」をこれらのコンポーネントで表した

### 依存性管理

- 制御の流れは右から左に進む
    - コントローラーから受け取った入力をインタラクターが処理する。その結果を受け取ったプレゼンターが結果をフォーマットして、ビューがそれを表示する
- 矢印の向きは必ずしも右から左ではない
    - 依存性のルールに従い、二重線を越える矢印はすべて左から右となっており、常に上位レベルの方針を含むコンポーネントに向かっている
- 使用の関係は制御の流れと同じ向きなのに対して、継承の関係は制御の流れと逆向きである
    - 下位レベルの詳細が変わったとしても、上位レベルの方針には影響しないようにしている

## まとめ

- 図33-2では下記の2つの観点での分割が含まれている
    - 単一責任の原則に基づくアクターによる分割
    - 依存性のルールによる分割
- どちらの分割も、変更の理由や頻度が異なるものを分離することが目的
- コードの構成をこのようにしておけば、システムをデプロイする時にも思い通りに進められるようになる