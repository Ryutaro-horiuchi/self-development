## なぜNULLがそんなに悪いのか？

1. SQLのコーディングにあたり、人間の直観に反する3値論理を考慮せねばならない。
2. IS NULL、IS NOT NULLを指定する場合、インデックスの利用に制限が入りパフォーマンスが悪い。多くのDBMSではインデックスにNULLが多いとインデックスが参照されなかったり、Oracleのようにそもそもインデックスが使用されない実装もある。
3. 四則演算またはSQL関数の引数にNULL が含まれると「NULLの伝播」が起こる。
4. SQLの結果を受け取るホスト言語において、NULLの組み込み方が標準化されていない。また、DBMS間でもNULLの扱いに関する仕様が不統一。
5. 通常の列の値と違って、NULLは行のどこかに余分なビットを持つことで実装されている。そのため記憶領域を圧迫したり、検索パフォーマンスを悪化させたりする。
6. NULLを含むカラムに作成するユニークインデックスの「ユニーク」の意味が各RDBMS
で違う。たとえば、複数のNULLを含む列にユニークインデックスを作成するとき、NULLの重複によってエラーになったりならなかったりする。
7. NULLは値ではないため、ORDER BY句によるソートの際のルールを意識する必要がある。NULLは定義域に含まれる値ではないため、本来は順序も付けられない。しかし実務上はレポートのどこかに表示しなければならないので、一般には最大値か最小値として扱われる。これがまた実装によってどちらがデフォルトが異なり、話をややこしくしている。

## コードの場合 — 未コード化用コードを割り振る

- コードとは、企業コード、都道府県コード、性別コード等
- NULLを許容する場合は、未コード化用コードを割り振る
- Ex.
    - ISOの性別コードでは「1: 男性」、「2: 女性」の他に「０: 未知」「9: 適用不能」という2つの未コード化用コードが使われている
    - 1つで十分な場合は「XXXXX」等を用意すれば良い。
        - 99999のようなコードを使うことは避けた方が良い。
            
            → コードには多くの場合、数字が使われるため未コード化用コードで採用したコードを持つ企業が現実に出現してしまう可能性があるため。そのためコード列では、必ず文字列型で定義すべき
            

## 名前の場合  —「名無しの権兵衛」を割り振る

- コードと同様、不明で表す値を与える。「不明」でも「UNKNOWN」でも何でも良いが、開発チーム内で共通了承の得られた適当な名前を割り振る

## 数値の場合 — 0で代替する

- 最初からNULLを0で代替する
- とはいえ、セルコもいうように「ガソリンタンクが空なのと、車を持っていない」は異なる
- 現実的には
    - 0に変換する
    - どうしても0とNULLを区別したい場合だけ、NULLを許可する

## 日付の場合 — 最大値・最小値で代替する

- 開始日や終了日など「期限」を意味する場合は「0001-01-01」や「9999-12-31」のように可能な最大値・最小値を使うことで対応できる

## 指針のまとめ

1. まずデフォルト値を入れられないか検討する
2. どうしようもないば良いだけNULLを許可する