## ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã®åŸºæœ¬

- ã€Œå‹T ã¾ãŸã¯ å‹Uã€ã®ã‚ˆã†ãªè¡¨ç¾ãŒã§ãã‚‹å‹
- æ§‹æ–‡
    - `type Hoge = T | U` ;
- Ex.
    
    ```tsx
    type Animal = {
      species: string;
    };
    type Human = {
      name: string;
    }
    
    type User = Animal | Human;
    
    // ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯Animalå‹ãªã®ã§Userå‹ã«ä»£å…¥å¯èƒ½
    const tama: User = {
      species: "Felis silvestris catus"
    }
    // ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯Humanå‹ãªã®ã§Userå‹ã«ä»£å…¥å¯èƒ½
    const uhyo: User = {
      name: "uhyo"
    };
    ```
    
    - ä¸€æ–¹ã®å‹ã«ã—ã‹ãªã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
        
        ```tsx
        function getName(user: User): string {
        	return user.name;
          // ã‚¨ãƒ©ãƒ¼: Property 'name' does not exist on type 'User'.
          // Property 'name' does not exist on type 'Animal'.
        }
        ```
        

## ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³å‹

- ã€ŒTå‹ã§ã‚ã‚Šã‹ã¤Uå‹ã§ã‚‚ã‚ã‚‹å€¤ã€ã‚’æ„å‘³ã™ã‚‹å‹
- æ§‹æ–‡
    - `type Hoge = T & U;`
- Ex
    
    ```tsx
    type Animal = {
      species: string;
      age: number;
    }
    
    type Human = Animal & {
      name: string;
    }
    
    const tama: Animal = {
      species: "Felis silvestris catus",
      age: 3
    };
    const uhyo: Human = {
      species:  "Homo sapiens sapiens",
      age: 26,
      name: "uhyo"
    };
    ```
    
    - Humanå‹ã¯type Animalã¨nameãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤åˆæˆã•ã‚ŒãŸå‹ã§ã‚ã‚‹

## ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«

### ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®è¡¨ç¾

- ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã€Œã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã—ãªã„ã‹ã‚‚ã—ã‚Œãªã„ã€ã¨ã„ã†çŠ¶æ³ã‚’è¡¨ç¾ã™ã‚‹æ–¹æ³•ã¯2ã¤ã‚ã‚‹
    1. ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ ? ã‚’ã¤ã‘ã‚‹
        - [ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å®£è¨€](https://www.notion.so/29f93db05554804cb49be1d3a23c72a8?pvs=21)
        - ageã‚’å®šç¾©ã—ãªãã¦ã‚‚å•é¡Œãªã„
    2. ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ã‚ãšã«undefinedã¨ã®ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã‚’ã¨ã‚‹
        
        ```tsx
        const uhyo: Human = {
        	name: string;
        	age: number | undefined;
        };
        ```
        
        - ã“ã®æ™‚ageã¯undefinedã§ã‚‚è‰¯ã„ã®ã§ã€æ˜ç¤ºçš„ã«ageãŒå­˜åœ¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- tsconfig.jsonã§è¨­å®šã§ãã‚‹`exactOptionalPropertyTypes`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæœ‰åŠ¹ãªã¨ãã¯ã€age?: numberã®ã‚ˆã†ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯æ˜ç¤ºçš„ã«undefinedã‚’ä»£å…¥ã§ããªããªã‚‹

### ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒã‚§ã‚¤ãƒ‹ãƒ³ã‚°ã«ã‚ˆã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚¢ã‚¯ã‚»ã‚¹

- ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒnullã‚„undefinedã§ã‚‚ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹æ§‹æ–‡
- æ§‹æ–‡
    - `obj?.hoge`
- Ex.
    
    ```tsx
    type Human = {
    	name: string;
    	age: number;
    }
    
    function useMaybeHuman(human: Human | undefined) {
    	const age = human?.age;
    	console.log(age)
    }
    
    // é–¢æ•°å‘¼ã³å‡ºã—
    function useTime(getTimeFunc: GetTimeFunc | undefined) {
    	const timeOrUndefined = getTimeFunc?.();
    }
    
    // ãƒ–ãƒ©ã‚±ãƒƒãƒˆ
    obj?.["foo"]
    
    ```
    
- ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒã‚§ã‚¤ãƒ‹ãƒ³ã‚°ã®å¾Œã«ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã‚‚ã¤ã‘ã‚‰ã‚Œã‚‹ã€‚
    - ?.ã®å‘¼ã³å‡ºã—å…ƒã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒnull, undefinedã ã£ãŸå ´åˆã€ãã®å¾Œã®å‘¼ã³å‡ºã—ã¯ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã‚‹
        - ?.ã‹ã‚‰ç¶šãã€ã¾ã¨ã‚ã¦é£›ã°ã•ã‚Œã‚‹ã²ã¨ã¾ã¨ã¾ã‚Šã®éƒ¨åˆ†ã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒã‚§ã‚¤ãƒ³ã¨å‘¼ã°ã‚Œã‚‹
    
    ```tsx
    const timeStringOrUndefined = getTimeFunc?.().toString();
    // getTimeFuncãŒnull(undefined)ã§ã‚‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
    ```
    

## ãƒªãƒ†ãƒ©ãƒ«å‹

- ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã‚’ã•ã‚‰ã«ç´°åˆ†åŒ–ã—ãŸå‹
- Ex.
    
    ```tsx
    // æ–‡å­—åˆ—ã®ãƒªãƒ†ãƒ©ãƒ«å‹
    const foo: "foo" = "foo";
    // æ•°å€¤ã®ãƒªãƒ†ãƒ©ãƒ«å‹
    const one: 1 = 1;
    // çœŸå½å€¤ã®ãƒªãƒ†ãƒ©ãƒ«å‹
    const t: true = true;
    // BigIntã®ãƒªãƒ†ãƒ©ãƒ«å‹
    const three: 3n = 3n;
    ```
    
    - fooå‹ã¯`â€fooâ€`ã¨ã„ã†æ–‡å­—åˆ—ã—ã‹å…¥ã‚Œã‚‹ã“ã¨ãŒã§ããªã„
- ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã¨ãƒªãƒ†ãƒ©ãƒ«å‹ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã‚±ãƒ¼ã‚¹ãŒå¤šã„
    
    ```tsx
    function signNumber(type: "plus" | "minus") {
      return type === "plus" ? 1 : -1;
    }
    ```
    

### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«å‹

- æ–‡å­—åˆ—ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ã¨åŒã˜ãã€ãƒãƒƒã‚¯ã‚¯ã‚©ãƒ¼ãƒˆã¨`${}`ã‚’ä½¿ç”¨ã™ã‚‹ãŒã€`${}`ã«å…¥ã‚‹ã®ã¯å‹ã§ã‚ã‚‹
- Ex.
    
    ```tsx
    function getHelloStr(): `Hello, ${string}!` {
      const rand = Math.random();
      if (rand < 0.3) {
        return "Hello, world!";
      } else if (rand < 0.6) {
        return "Hello, my world!";
      } else if (rand < 0.9) {
        // ã‚¨ãƒ©ãƒ¼: Type '"Hello, world."' is not assignable to type '`Hello, ${string}!`'.
        return "Hello, world.";
      } else {
        // ã‚¨ãƒ©ãƒ¼: Type '"Hell, world!"' is not assignable to type '`Hello, ${string}!`'.
        return "Hell, world!";
      }
    }
    ```
    
    - æ–‡å­—åˆ—ãŒç‰¹å®šã®å‹ã§ã‚ã‚‹ã“ã¨(ä¾‹ã§ã¯ã€``Hello, ${string}!``)ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨ãŒã§ãã‚‹


## å‹ã®çµã‚Šè¾¼ã¿

ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã¯ã€ã‚³ãƒ¼ãƒ‰ã®ä¸­èº«ã«å¿œã˜ã¦å€¤ã®æŒã¤å‹æƒ…å ±ãŒå¤‰åŒ–ã™ã‚‹

### ç­‰ä¾¡æ¼”ç®—å­ã«ã‚ˆã‚‹çµã‚Šè¾¼ã¿

```tsx
function numberWithSign(num: number, type: SignType | "none") {
  if (type === "none") {
    // ã“ã“ã§ã¯typeã¯"none"å‹ã¨ã¨ãªã‚‹
    return 0;
  } else {
    // ã“ã“ã§ã¯typeã¯SignTypeå‹ã¨ãªã‚‹
    return num * signNumber(type);
  }
}
```

### typeof æ¼”ç®—å­ã«ã‚ˆã‚‹çµã‚Šè¾¼ã¿

- https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/typeof
    - typeof nullãŒâ€objectâ€ã«ãªã‚‹ç‚¹ã ã‘æ°—ã‚’ä»˜ã‘ã‚‹

### ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ã‚’ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã§è¡¨ç¾ã™ã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

- ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹
    - ãƒ‡ãƒ¼ã‚¿ã®åˆ¤åˆ¥ç”¨ã®æƒ…å ±(ã‚¿ã‚°)ã‚’æŒã¤ã®ãŒä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ã®ç‰¹å¾´
        - æ‰±ã†ãƒ‡ãƒ¼ã‚¿ã®å½¢ã¨å¯èƒ½æ€§ã‚’å‹ã§æ­£ç¢ºã«è¡¨ç¾ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
    - TypeScriptã§ã¯ã€åŸç†çš„ã«ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«å‹æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒä¸å¯èƒ½ã§ã‚ã‚‹ãŸã‚ã€ãã‚Œã‚’è£œã†ãŸã‚ã«ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«è¦‹ãˆã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ã‚¿ã‚°ã‚’ä»˜ä¸ã—ã¦ã„ã‚‹ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã‚‹
- Ex.
    
    ```tsx
    type Animal = {
      tag: "animal";
      species: string;
    }
    type Human = {
      tag: "human";
      name: string;
    }
    type User = Animal | Human;
    
    function getUserName(user: User) {
      if (user.tag === "human") {
        // ã“ã“ã§ã¯userã¯Humanå‹
        return user.name;
      } else {
        // ã“ã“ã§ã¯userã¯Animalå‹
        return "åç„¡ã—";
      }
    }
    ```
    

## lookupå‹

- å‹æƒ…å ±ã‚’å†åˆ©ç”¨ã™ã‚‹
- æ§‹æ–‡
    
    ```tsx
    T[K]
    ```
    
    - Tã¨Kã¯ã©ã¡ã‚‰ã‚‚ä½•ã‚‰ã‹ã®å‹
    - Tã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã€Kã¯æ–‡å­—åˆ—ã®ãƒªãƒ†ãƒ©ãƒ«å‹
- Ex.
    
    ```tsx
    type Human = {
      type: "human";
      name: string;
      age: number;
    };
    
    function setAge(human: Human, age: Human["age"]) {
      return {
        ...human,
        age
      };
    }
    
    const uhyo: Human = {
      type: "human",
      name: "uhyo",
      age: 26,
    };
    
    const uhyo2 = setAge(uhyo, 27);
    console.log(uhyo2); // { "type": "human", "name": "uhyo", "age": 27 } ã¨è¡¨ç¤ºã•ã‚Œã‚‹
    ```
    
    - ä¾‹ã§è¨€ã†ã¨ã€Human[â€ageâ€]ã¯numberå‹ã¨ãªã£ã¦ã„ã‚‹ãŸã‚ã€setAgeã®ageã®å‹ã¯å‹•çš„ã«numberå‹ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹
    - `function setAge(â€¦, age: number)`ã¨ã‚‚ã§ãã‚‹ãŒã€lookupå‹ã‚’ä½¿ã†ã®ã¯ã€åŒã˜ã“ã¨ã‚’äºŒåº¦æ›¸ã‹ãªã„(DRY)ã“ã¨ãŒä¸»ãªç›®çš„ã¨ãªã‚‹
- ä½¿ã„ã™ãã‚‹ã®ã¯è‰¯ããªã„
    - ä¸€è¦‹ã—ã¦å…·ä½“çš„ãªå‹ãŒã‚ã‹ã‚‰ãªã„
    - ä¾‹ã§è¨€ãˆã°ã€ã€ŒHumanã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ageãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‹ã‚‰ã¨ã£ãŸå€¤ã‚’å¼•æ•°ã«æ¸¡ã—ã¦ã»ã—ã„ã€ã¨è¨€ã†æ„æ€è¡¨ç¤ºãŒã‚ã‚‹å ´åˆã®ã¿æ¨å¥¨

## keyofå‹

- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã‚’å…¨ã¦å—ã‘å…¥ã‚Œã‚‹å‹ã‚’ä½œæˆã§ãã‚‹
- Ex.
    
    ```tsx
    type Human = {
      name: string;
      age: number;
    };
    
    type HumanKeys = keyof Human;
    // HumanKeysã¯ "name" | "age" ã¨ã„ã†å‹ã«ãªã‚‹
    
    let key: HumanKeys = "name";
    key = "age";
    // ã‚¨ãƒ©ãƒ¼: Type '"hoge"' is not assignable to type 'keyof Human'.
    key = "hoge";
    ```
    
- typeofã¨çµ„ã¿åˆã‚ã›ã¦å‹•çš„ã«å‹ã‚’å®šç¾©ã™ã‚‹
    - [typeofã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§å¤‰æ•°ã®å‹ã‚’å¾—ã‚‹](https://www.notion.so/typeof-2a193db0555480f29494e994888fc23b?pvs=21)
    - Ex.
        
        ```tsx
        const mmConversionTable = {
          mm: 1,
          m: 1e3,
          km: 1e6,
        };
        
        function convertUnits(value: number, unit: keyof typeof mmConversionTable) {
          const mmValue = value * mmConversionTable[unit];
          return {
            mm: mmValue,
            m: mmValue / 1e3,
            km: mmValue / 1e6
          };
        }
        
        // { "mm": 5600000, "m": 5600, "km": 5.6 } ã¨è¡¨ç¤ºã•ã‚Œã‚‹
        console.log(convertUnits(5600, "m"));
        ```
        
        1. typeof mmConversionTableã§ã€å¤‰æ•°ã®å‹ã‚’å¾—ã‚‹
            - typeof mmConversionTable = `{ mm: number;  m: number; km: number; }` å‹ã¨ãªã‚‹
        2. ä¸Šè¨˜ã«å¯¾ã—ã€keyofã‚’ä½¿ç”¨ã™ã‚‹
            - çµæœã€å¼•æ•°unitã®å‹ã¯`â€mmâ€ | â€œmâ€ | â€œkmâ€`ã¨ãªã‚‹
    - Ex.ã§ã¯ã€`mmConversionTable[unit]`ã¨ã—ã¦ã„ã‚‹ãŒã€ã“ã‚Œã¯unitãŒstringå‹ã ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚
        
        <aside>
        ğŸ’¡
        
        ãã®ãŸã‚ keyof typeof å¤‰æ•° ã¯ã‚ˆãä½¿ã‚ã‚Œã‚‹ã¨ã®ã“ã¨ã€‚è¦šãˆã¦ãŠã
        
        </aside>