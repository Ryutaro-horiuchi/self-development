# モジュールバンドラ

- 複数のJavaScriptファイルを一つにまとめてくれる
- Webpackはモジュールバンドラのデファクトスタンダードとして採用されてきた

## Vite

- Webpackと違い、開発時にモジュールバンドルを行わず、ブラウザにモジュールファイルをそのまま読み込ませて実行させるため、バンドルの処理時間がかからず高速に動作するようになっている。

# Nuxtとは

- Vue.js単体で利用されるのは稀であり、VueRouterやVuexなどのモジュールを利用することが多いのが実情だった。
    
    → これらのよく利用するモジュールをワンパックにし、利用できるように作られたフレームワークがNuxt.js
    

# CSRとシングルページアプリケーション

- 全ての画面レンダリングをクライアント側で行う仕組みのことをクライアントサイドレンダリング(CSR)と呼ぶ
    - サーバーから読み込むファイルが1ページ分のhtmlのみで、その後の画面はCSRで行うアプリケーションのことをシングルページアプリケーション(SPA)と呼ぶ

## CSRの問題点

### ダウンロード時間の問題

- サーバーサイドアプリケーションの場合は、サーバーサイドで生成された画面1ページ分のみをダウンロードすればよく時間がそれほど必要ではない
- 対して、CSRは全画面を表示させる動作に必要なアプリケーションをダウンロードする必要があり、初期ダウンロードは時間がかかる

### SEOの問題

- サーバーサイドアプリケーションの場合、表示された画面は静的なHTMLデータと区別がつかないため、クローラーが簡単にインデックスできる
- 対してCSRの場合は、ダウンロードの時間がかかるため、クローラーがインデックスしきれずに次に行くことがある。
    
    → 完全にインデックスされるまでに時間がかかってしまい、その分SEOに不利と言える
    

## ユニバーサルレンダリング

- CSRの問題点を踏まえ、サーバーサイドレンダリング(SSR)が復活する
- Nuxtでは、クライアントサイドでこれまでレンダリングしていた処理をサーバーサイドで行い、クライアントサイドとサーバーサイドとの分業を行う
    - 分業された状態をハイドレーションといい、ハイドレーションを実現するレンダリングを、ユニバーサルレンダリングと呼ぶ
    - イメージ
        
        ![IMG_9548.jpeg](attachment:d948be2a-23dd-46f8-ac9a-2bd994a11030:IMG_9548.jpeg)
        
- 単なるSSRとの違い
    - CSRのコードと同じものがサーバー上で動作し、サーバーでレンダリングされたHTMLデータがブラウザで返される
    - その時に、どうしてもクライアントサイドで動作しなければならないものについては、JavaScriptコードもクライアントに渡される
        - → ブラウザがダウンロードするデータが1ページだけになるにも関わらず、ユーザー操作に即座に対応できるようになる

## SSG(静的サイトジェネレーション)

- Vueアプリケーションから、あらかじめ静的なhtmlファイルを生成させ、htmlファイル類一式をアップロードさせることで、処理にかかる時間を含めず表示速度を早くしたアプローチのこと
- ブログサイトのように表示内容がユーザーによってほぼ変化しないものに向いている

## ISG(インクリメンタル静的ジェネレーション)

- リクエストが届くとサーバーにキャッシュされたhtmlファイルを返した後、表示内容に変更があった場合はバックグラウンドで新たなhtmlファイルを生成し、キャッシュしておく
    
    → 次にアクセスがあったときは、新しくキャッシュされたファイルをブラウザに返す
    

## ハイブレッドレンダリングとNitro

### ハイブレッドレンダリング

- CSR、ユニバーサルレンダリング、SSG、ISGを一つのアプリケーション内に混在させることができる

### Nitro(ナイトロ)

- SSRやユニバーサルレンダリング、ISGの場合は、作成したアプリケーションをサーバー上で動作させる環境が必要。Nuxt.jsでは原則Node.jsであるため、Node.jsが動作するサーバーを選択する必要がある
    - Nuxt2はNode.js上で動作させるアプリケーションに加え、依存するモジュールも動作環境に含める必要があり、これによって一部不具合を引き起こす可能性があった
    - ↑ を解決するためにNitroが開発され、Nuxt3の基幹部分に据えられた
- Nuxtアプリケーションコードを解析し、ケースに応じてCSR、ユニバーサルレンダリング等を活用してハイブレッドレンダリングを実現
- 依存モジュールも開発段階でのみ必要とするように作られたため、Nuxt2の時の不具合が起きる問題も解消され、稼働時間も大幅に短縮された。

### httpサーバー h3

- Nitroには軽量httpサーバーのh3が含まれている
- Nuxtアプリケーションはサーバーサイドで動作させることができるため、サーバーのエンドポイントを実装することも可能